<Project Sdk="Microsoft.NET.Sdk">

  <Import Project="../OpenCCSharp.Commons/OpenCCSharp.Packages.props" />

  <PropertyGroup>
    <AssemblyName>OpenCCSharp.Presets</AssemblyName>
    <PackageId>CXuesong.OpenCCSharp.Presets</PackageId>
    <Description>
      This package contains Chinese variant conversion presets.

      This library is in INT phase and its API is still subject to drastic changes.

      OpenCCSharp is a .NET library for Chinese handwritten script conversion.
      This project is inspired by OpenCC project, and used similar approach in word segmentation.
      This project also used the conversion dictionary in the aforementioned project.
    </Description>
    <TargetFrameworks>net6.0</TargetFrameworks>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
  </PropertyGroup>

  <PropertyGroup>
    <OpenCCDictionaryDir>$(ProjectDir)../vendor/OpenCC/data/dictionary</OpenCCDictionaryDir>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\OpenCCSharp.Conversion\OpenCCSharp.Conversion.csproj" />
  </ItemGroup>

  <ItemGroup>
    <None Remove="ConversionDefinitions\*" />
    <EmbeddedResource Include="ConversionDefinitions\*" />
    <EmbeddedResource Include="$(IntermediateOutputPath)/ConversionDictionaries/**/*" Link="ConversionDictionaries/%(RecursiveDir)%(Filename)%(Extension)" />
  </ItemGroup>

  <Target Name="PreBuild" BeforeTargets="PreBuildEvent">
    <Exec Command="dotnet run --project &quot;$(ProjectDir)../OpenCCSharp.BuildTools&quot; -- build-preset-dictionaries &quot;PresetDictionaryList.txt&quot; &quot;$(OpenCCDictionaryDir)&quot; &quot;$(IntermediateOutputPath)/ConversionDictionaries&quot;" UseUtf8Encoding="Always" />
  </Target>

</Project>
